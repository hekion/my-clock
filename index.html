<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smart Dashboard</title>
    <style>
        * { box-sizing: border-box; }
        body, html {
            margin: 0; padding: 0;
            width: 100vw; height: 100vh;
            background-color: #1a1a1a;
            color: #fff; font-family: sans-serif;
            overflow: hidden;
        }

        /* èƒŒæ™¯ï¼šã‚·ãƒ³ãƒ—ãƒ«ã«imgã‚¿ã‚°ã‚’æœ€èƒŒé¢ã«é…ç½® */
        #bg-container {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -2;
        }
        #bg-img {
            width: 100%; height: 100%;
            object-fit: cover;
            display: none; /* åˆæœŸã¯éè¡¨ç¤º */
        }

        /* èƒŒæ™¯ã‚’æš—ãã™ã‚‹å±¤ */
        .overlay {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: -1;
        }

        /* ç¸¦ç”»é¢æ™‚ã®å›è»¢ */
        @media screen and (orientation: portrait) {
            #main {
                width: 100vh; height: 100vw;
                transform: rotate(90deg) translateY(-100vw);
                transform-origin: top left;
            }
        }

        #main {
            width: 100vw; height: 100vh;
            display: flex; justify-content: space-around; align-items: center;
            padding: 20px;
        }

        .clock-box { text-align: center; flex: 1; }
        #time { font-size: 15vh; font-weight: bold; }
        #date { font-size: 4vh; opacity: 0.8; }

        .side-box { width: 350px; background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px); padding: 20px; border-radius: 20px; }
        
        /* è¨­å®šãƒœã‚¿ãƒ³ */
        .config { position: fixed; bottom: 20px; right: 20px; z-index: 100; }
        .btn { background: #fff; color: #000; padding: 12px 20px; border-radius: 30px; cursor: pointer; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
    </style>
</head>
<body>

<div id="bg-container">
    <img id="bg-img" src="">
</div>
<div class="overlay"></div>

<div id="main">
    <div class="clock-box">
        <div id="time">00:00:00</div>
        <div id="date">0000.00.00 ---</div>
    </div>
    <div class="side-box">
        <div style="text-align:center;">
            <p>Googleé€£æºã®æº–å‚™ä¸­...</p>
        </div>
    </div>
</div>

<div class="config">
    <label class="btn" for="up">ğŸ“· èƒŒæ™¯ç”»åƒã‚’é¸æŠ</label>
    <input type="file" id="up" accept="image/*" style="display:none">
</div>

<script>
    // 1. æ™‚è¨ˆæ›´æ–°
    function tick() {
        const n = new Date();
        document.getElementById('time').textContent = n.toLocaleTimeString('ja-JP', { hour12: false });
        const d = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
        document.getElementById('date').textContent = `${n.getFullYear()}.${n.getMonth()+1}.${n.getDate()} ${d[n.getDay()]}`;
    }
    setInterval(tick, 1000); tick();

    // 2. èƒŒæ™¯åæ˜ ï¼ˆæœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ï¼‰
    const up = document.getElementById('up');
    const bgImg = document.getElementById('bg-img');

    up.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (!file) return;

        // DataURLå½¢å¼ã§èª­ã¿è¾¼ã¿ï¼ˆã“ã‚ŒãŒä¸€ç•ªåæ˜ ã•ã‚Œã‚„ã™ã„ï¼‰
        const reader = new FileReader();
        reader.onload = (event) => {
            const result = event.target.result;
            bgImg.src = result;
            bgImg.style.display = 'block';
            
            // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ï¼ˆæ¬¡å›èµ·å‹•ç”¨ï¼‰
            try {
                localStorage.setItem('dashboard_bg', result);
            } catch (err) {
                console.log("Storage limit exceeded, but image is displayed.");
            }
        };
        reader.readAsDataURL(file);
    });

    // èµ·å‹•æ™‚ã«ä¿å­˜ã•ã‚ŒãŸç”»åƒã‚’å¾©å…ƒ
    window.onload = () => {
        const saved = localStorage.getItem('dashboard_bg');
        if (saved) {
            bgImg.src = saved;
            bgImg.style.display = 'block';
        }
    };
</script>
</body>
</html>
